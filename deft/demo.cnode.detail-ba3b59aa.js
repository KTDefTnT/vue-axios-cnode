(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{319:function(t,e,n){var r=n(320);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(219).default)("4f26adb8",r,!1,{})},320:function(t,e,n){(t.exports=n(54)(!1)).push([t.i,'\n*{padding:0px;margin:0px;-webkit-box-sizing:border-box;box-sizing:border-box\n}\nbody{background-color:#e1e1e1;font-size:12px\n}\n.text-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal\n}\n.header{height:40px;line-height:40px;font-size:14px;text-align:left;padding-left:20px;background-color:#F6F6F6;border-radius:4px 4px 0 0\n}\n.tab{display:inline-block;text-align:center;padding:0px 6px;margin:0px 10px 5px 0;width:40px;height:20px;line-height:20px;border-radius:2px;font-size:12px;color:#222;background-color:#fecfef\n}\n.tab.top{color:#fff;background-color:#a18cd1\n}\n.detail-wrapper{border-radius:4px 4px 0px 0px;border-bottom:20px solid #e1e1e1\n}\n.detail-wrapper .top-content{padding:15px 10px;text-align:left;border-bottom:1px solid #F6F6F6\n}\n.detail-wrapper .top-content .title-content{padding-bottom:10px\n}\n.detail-wrapper .top-content .title-content .title{font-size:24px;font-weight:900\n}\n.detail-wrapper .top-content .decription{color:#8D8D8D;font-size:14px\n}\n.detail-wrapper .detail-content{padding:15px 10px\n}\n.reply-wrapper{display:block;position:relative;border-radius:4px\n}\n.reply-wrapper .reply-header{height:40px;line-height:40px;padding-left:10px;text-align:left;font-size:15px;color:#222;background-color:#F6F6F6;border-radius:4px 4px 0px 0px\n}\n.reply-wrapper .reply-list{display:block;padding:10px;border-bottom:1px solid #F6F6F6\n}\n.reply-wrapper .reply-list:before,.reply-wrapper .reply-list:after{content:" ";display:table\n}\n.reply-wrapper .reply-list:after{clear:both\n}\n.reply-wrapper .reply-list .reply-top:before,.reply-wrapper .reply-list .reply-top:after{content:" ";display:table\n}\n.reply-wrapper .reply-list .reply-top:after{clear:both\n}\n.reply-wrapper .reply-list .reply-top img{width:30px;height:30px;cursor:pointer;float:left;margin-right:15px;border-radius:2px\n}\n.reply-wrapper .reply-list .reply-top .reply-info{float:left;font-size:14px\n}\n.reply-wrapper .reply-list .reply-top .reply-info span{color:#08c\n}\n.reply-wrapper .reply-list .reply-top .reply-info .reply-name{color:#222;font-weight:500;margin-right:5px\n}\n.reply-wrapper .reply-list .reply-top .dianzan{float:right;font-size:14px;padding-right:20px\n}\n.reply-wrapper .reply-list .reply-top .dianzan .icons{cursor:pointer;margin-right:3px\n}\n.reply-wrapper .reply-list .reply-content{width:97%;margin-top:-10px;margin-left:45px;float:left\n}\n.reply-container{width:100%;margin:0px auto;position:relative\n}\n.reply-container .header{height:40px;line-height:40px;font-size:14px;text-align:left;padding-left:20px;background-color:#F6F6F6\n}\n.reply-container .el-textarea__inner{border-radius:0px;border-left:3px solid #F6F6F6;border-right:3px solid #F6F6F6\n}\n.reply-container .sure{position:absolute;right:15px;bottom:5px\n}\n.markdown-text{margin:0 10px\n}\n.markdown-text img{max-width:900px;max-height:600px;display:inline-block\n}\n.markdown-text strong{font-weight:700\n}\n.markdown-text h1,.markdown-text h2,.markdown-text h3,.markdown-text h4{font-size:32px;font-weight:800;text-align:left;padding-bottom:6px;margin-bottom:15px;border-bottom:1px solid #F6F6F6\n}\n.markdown-text h1:first-child{margin-top:0px\n}\n.markdown-text h1{margin-top:30px\n}\n.markdown-text h2{font-size:28px\n}\n.markdown-text h3{font-size:22px\n}\n.markdown-text h4{font-size:16px\n}\n.markdown-text hr{margin:20px 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff\n}\n.markdown-text ol,.markdown-text ul{text-align:left;padding:5px 0px;margin-left:30px;font-size:14px;font-weight:600\n}\n.markdown-text ol li,.markdown-text ul li{list-style-type:decimal;line-height:1.5em;padding:5px 0px\n}\n.markdown-text ul li{list-style-type:disc\n}\n.markdown-text blockquote{padding:0 0 0 15px;border-left:5px solid #eee;display:block;-webkit-margin-before:1em;-webkit-margin-after:1em\n}\n.markdown-text blockquote p{color:#8D8D8D\n}\n.markdown-text code{width:100%;text-align:left;font-size:12px;font-weight:500;margin:0 1px;padding:1px 4px;border-radius:2px;color:#000;background-color:#fcfafa;padding:4px 6px\n}\n.markdown-text .prettyprint{width:98%;font-size:14px;border-radius:2px;padding:5px 15px;border:none;margin:20px -10px;border-width:1px 0;background:#f7f7f7;-o-tab-size:4;-moz-tab-size:4;tab-size:4\n}\n.markdown-text .prettyprint code{display:inherit;text-align:left;background-color:inherit;width:100%\n}\n.markdown-text .prettyprint code span{padding:2px 0\n}\n.markdown-text a{font-size:14px;color:#08c\n}\n.markdown-text a:hover{text-decoration:underline\n}\n.markdown-text p{max-width:97%;font-size:15px;line-height:1.7em;margin-bottom:10px;text-align:left;margin-bottom:1em\n}\n.markdown-text p img{max-width:850px\n}\n.markdown-text p strong{display:inline-block;margin-bottom:5px\n}\n',""])},328:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"detail-wrapper"},[n("div",{staticClass:"top-content"},[n("div",{staticClass:"title-content"},[n("span",{staticClass:"tab"},[t._v(t._s(t._f("types")(t.data.tab,t.data.top)))]),t._v(" "),n("span",{staticClass:"title"},[t._v(t._s(t.data.title))])]),t._v(" "),n("div",{staticClass:"decription"},[t._v("\n        • 发布于"+t._s(t._f("date")(t.data.last_reply_at,!0))+" • 作者 "+t._s(t.name)+" • "+t._s(t.data.visit_count)+"次浏览 • 最后一次编辑 "+t._s(t._f("date")(t.data.last_reply_at,!0))+" • 来自  "+t._s(t._f("types")(t.data.tab,""))+"\n      ")])]),t._v(" "),n("div",{staticClass:"detail-content",domProps:{innerHTML:t._s(t.data.content)}})]),t._v(" "),n("div",{staticClass:"reply-wrapper"},[n("div",{staticClass:"reply-header"},[t._v("\n      "+t._s(t.reply_counts)+" 回复数\n    ")]),t._v(" "),t._l(t.data.replies,(function(e,r){return n("div",{key:e.id},[n("div",{staticClass:"reply-list"},[n("div",{staticClass:"reply-top"},[n("img",{attrs:{src:e.author.avatar_url},on:{click:function(n){return t.showUser(e.author.loginname)}}}),t._v(" "),n("div",{staticClass:"reply-info"},[n("span",{staticClass:"reply-name"},[t._v(t._s(e.author.loginname))]),t._v(" "),n("span",[t._v(t._s(r+1)+"楼 • "+t._s(t._f("date")(e.create_at,!0)))]),t._v(" "),e.author.loginname===t.name?n("span",{staticClass:"tab"},[t._v("作者")]):t._e()]),t._v(" "),n("span",{staticClass:"dianzan",on:{click:function(n){return t.replyUpDown(e)}}},[n("i",{staticClass:" icons iconfont icon-dianzan1"}),t._v(" "),e.reply_id===t.upDownId&&e.reply_id?n("span",[t._v(t._s(t.currentValue))]):n("span",[t._v(t._s(e.ups.length))])])]),t._v(" "),n("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(e.content)}})])])}))],2),t._v(" "),t.loading?t._e():n("div",{staticClass:"reply-container"},[n("div",{staticClass:"header"},[t._v("\n      回复\n    ")]),t._v(" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:16}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),n("el-button",{staticClass:"sure",attrs:{size:"medium",type:"primary"},on:{click:t.submitReply}},[t._v("回复")])],1)])};r._withStripped=!0;var i=n(55);var a=function(t){n(319)},o=Object(i.a)({data:function(){return{data:[],name:"",detailId:"",reply_counts:0,upDownId:"",currentValue:0,form:{content:"",accesstoken:"394686ea-c88a-4e05-80c1-ef425d6ada02"},topic_id:"",loading:!0}},methods:{showUser:function(t){this.$router.push({name:"demo.cnode.userInfo",params:{loginname:t}})},replyUpDown:function(t){var e=this;t.reply_id?this.$api.mock.cnode.giveGood(t.reply_id).then((function(n){e.upDownId=t.reply_id,n.success&&"up"===n.action?e.currentValue=1+t.ups.length:n.success&&"down"===n.up?e.currentValue=t.ups.length-1:e.currentValue=t.ups.length})):this.$notify.error({title:"点赞失败",message:"不能给此用户点赞！",duration:1e3})},submitReply:function(){var t=this;this.$api.mock.cnode.addReply(this.form,this.topic_id).then((function(e){e.success?t.getTopicDeatil(t.detailId):t.$notify.error({title:"回复失败",message:"请重新回复！！",duration:1e3})}))},getTopicDeatil:function(t){var e=this;this.loading=!0,this.$api.mock.cnode.getTopicDetail(t).then((function(t){t.success?(e.loading=!1,e.data=t.data,e.topic_id=t.data.id,e.reply_counts=t.data.replies.length,e.name=e.data.author.loginname):e.$alert(t.data,"加载失败",{type:"warning"}).then((function(t){e.$router.push({path:"/cnode/content/good"})}))}))}},created:function(){this.detailId=this.$route.params.id,this.getTopicDeatil(this.$route.params.id)}},r,[],!1,a,null,null);o.options.__file="src\\components\\modules\\detail.vue";e.default=o.exports}}]);