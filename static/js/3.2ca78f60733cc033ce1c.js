webpackJsonp([3],{bIBP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"detail-wrapper"},[e("div",{staticClass:"top-content"},[e("div",{staticClass:"title-content"},[e("span",{staticClass:"tab"},[t._v(t._s(t._f("types")(t.data.tab,t.data.top)))]),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(t.data.title))])]),t._v(" "),e("div",{staticClass:"decription"},[t._v("\n        • 发布于"+t._s(t._f("date")(t.data.last_reply_at,!0))+" • 作者 "+t._s(t.name)+" • "+t._s(t.data.visit_count)+"次浏览 • 最后一次编辑 "+t._s(t._f("date")(t.data.last_reply_at,!0))+" • 来自  "+t._s(t._f("types")(t.data.tab,""))+"\n      ")])]),t._v(" "),e("div",{staticClass:"detail-content",domProps:{innerHTML:t._s(t.data.content)}})]),t._v(" "),e("div",{staticClass:"reply-wrapper"},[e("div",{staticClass:"reply-header"},[t._v("\n      "+t._s(t.reply_counts)+" 回复数\n    ")]),t._v(" "),t._l(t.data.replies,function(a,s){return e("div",{key:a.id},[e("div",{staticClass:"reply-list"},[e("div",{staticClass:"reply-top"},[e("img",{attrs:{src:a.author.avatar_url},on:{click:function(e){t.showUser(a.author.loginname)}}}),t._v(" "),e("div",{staticClass:"reply-info"},[e("span",{staticClass:"reply-name"},[t._v(t._s(a.author.loginname))]),t._v(" "),e("span",[t._v(t._s(s+1)+"楼 • "+t._s(t._f("date")(a.create_at,!0)))]),t._v(" "),a.author.loginname===t.name?e("span",{staticClass:"tab"},[t._v("作者")]):t._e()]),t._v(" "),e("span",{staticClass:"dianzan",on:{click:function(e){t.replyUpDown(a)}}},[e("i",{staticClass:" icons iconfont icon-dianzan1"}),t._v(" "),a.reply_id===t.upDownId&&a.reply_id?e("span",[t._v(t._s(t.currentValue))]):e("span",[t._v(t._s(a.ups.length))])])]),t._v(" "),e("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(a.content)}})])])})],2),t._v(" "),t.loading?t._e():e("div",{staticClass:"reply-container"},[e("div",{staticClass:"header"},[t._v("\n      回复\n    ")]),t._v(" "),e("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:16}},model:{value:t.form.content,callback:function(a){t.$set(t.form,"content",a)},expression:"form.content"}}),t._v(" "),e("el-button",{staticClass:"sure",attrs:{size:"medium",type:"primary"},on:{click:t.submitReply}},[t._v("回复")])],1)])},staticRenderFns:[]};var n=e("VU/8")({data:function(){return{data:[],name:"",detailId:"",reply_counts:0,upDownId:"",currentValue:0,form:{content:"",accesstoken:"394686ea-c88a-4e05-80c1-ef425d6ada02"},topic_id:"",loading:!0}},methods:{showUser:function(t){this.$router.push({name:"demo.cnode.userInfo",params:{loginname:t}})},replyUpDown:function(t){var a=this;t.reply_id?this.$api.mock.cnode.giveGood(t.reply_id).then(function(e){a.upDownId=t.reply_id,e.success&&"up"===e.action?a.currentValue=1+t.ups.length:e.success&&"down"===e.up?a.currentValue=t.ups.length-1:a.currentValue=t.ups.length}):this.$notify.error({title:"点赞失败",message:"不能给此用户点赞！",duration:1e3})},submitReply:function(){var t=this;this.$api.mock.cnode.addReply(this.form,this.topic_id).then(function(a){a.success?t.getTopicDeatil(t.detailId):t.$notify.error({title:"回复失败",message:"请重新回复！！",duration:1e3})})},getTopicDeatil:function(t){var a=this;this.loading=!0,this.$api.mock.cnode.getTopicDetail(t).then(function(t){t.success?(a.loading=!1,a.data=t.data,a.topic_id=t.data.id,a.reply_counts=t.data.replies.length,a.name=a.data.author.loginname):a.$alert(t.data,"加载失败",{type:"warning"}).then(function(t){a.$router.push({path:"/cnode/content/good"})})})}},created:function(){this.detailId=this.$route.params.id,this.getTopicDeatil(this.$route.params.id)}},s,!1,function(t){e("lfcZ")},null,null);a.default=n.exports},lfcZ:function(t,a){}});
//# sourceMappingURL=3.2ca78f60733cc033ce1c.js.map